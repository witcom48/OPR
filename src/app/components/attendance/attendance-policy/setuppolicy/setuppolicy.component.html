<!-- Link Page -->
<!-- <div class="path">
    <span>Attendance</span>
    <div>
        <i></i>
        <a routerLink="/attendance/policy">Policy</a>
        <i></i>
        <small>Set {{title}}</small>
    </div>
</div> -->
<!-- ---------END Link Page----------- -->
<!-- <hr> -->
<p-breadcrumb class="max-w-full" [model]="mainMenuItems" [home]="homeIcon"></p-breadcrumb>

<p-tabView [(activeIndex)]="index" (onChange)="function($event)">
    <p-tabPanel [selected]="true">
        <ng-template pTemplate="header">
            <i class="pi pi-cog"></i>&nbsp;&nbsp;
            <span>{{langs.get('process')[selectlang]}}</span>
        </ng-template>
        <div class="formgrid grid align-items-end">
            <div class="field col-12">
                <app-select-emp></app-select-emp>
            </div>
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}}
                    {{langs.get('planholiday')[selectlang]}} :</label><br>
                <p-dropdown placeholder="{{langs.get('planholiday')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policyholiday"
                    [(ngModel)]="policyholidayselect"></p-dropdown>
            </div>
        </div>
        <div class="formgrid grid align-items-end">
            <div class="field col-12 md:col-4">
                <label for="lastname2">{{langs.get('year')[selectlang]}} :</label><br>
                <p-dropdown placeholder="{{langs.get('year')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="yaer_list"
                    [(ngModel)]="yearselect"></p-dropdown>
            </div>
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}} {{langs.get('shift')[selectlang]}}
                    :</label><br>
                <p-dropdown placeholder="{{langs.get('shift')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policyshift"
                    [(ngModel)]="policyshiftselect"></p-dropdown>
            </div>
        </div>
        <div class="formgrid grid align-items-end">
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}} {{langs.get('planot')[selectlang]}}
                    :</label><br>
                <p-dropdown placeholder="{{langs.get('planot')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policyOT"
                    [(ngModel)]="policyOTselect"></p-dropdown>
            </div>
        </div>
        <div class="formgrid grid align-items-end">
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}}
                    {{langs.get('diligence')[selectlang]}}:</label><br>
                <p-dropdown placeholder="{{langs.get('diligence')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policydiligence"
                    [(ngModel)]="policydiligenceselect"></p-dropdown>
            </div>
        </div>
        <div class="formgrid grid align-items-end">
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}} {{langs.get('late')[selectlang]}}:</label><br>
                <p-dropdown placeholder="{{langs.get('late')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policylate"
                    [(ngModel)]="policylateselect"></p-dropdown>
            </div>
        </div>
        <div class="formgrid grid align-items-end">
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}} {{langs.get('leave')[selectlang]}}:</label><br>
                <p-dropdown placeholder="{{langs.get('leave')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policyleave"
                    [(ngModel)]="policyleaveselect"></p-dropdown>
            </div>
        </div>
        <div class="formgrid grid align-items-end">
            <div class="field col-12 md:col-6">
                <label for="lastname2">{{langs.get('type')[selectlang]}}
                    {{langs.get('allowance')[selectlang]}} :</label><br>
                <p-dropdown placeholder="{{langs.get('allowance')[selectlang]}}" optionLabel="name" [showClear]="true"
                    [style]="{ width: '100%', overflow: 'visible' }" [options]="policyallow"
                    [(ngModel)]="policyallowselect"></p-dropdown>
            </div>
            <div *ngIf="!loading" class="field col-12 md:col-12">
                <p-button label="{{langs.get('proces')[selectlang]}}" (click)="process('AW')"></p-button>
            </div>
            <!-- <div class="field col-12 md:col-12"> <p-progressBar *ngIf="loading" mode="indeterminate"
                    [style]="{'height': '6px'}"></p-progressBar>
            </div> -->
        </div>
    </p-tabPanel>
    <p-tabPanel>
        <ng-template pTemplate="header">
            <i class="pi pi-file-import"></i>&nbsp;&nbsp;
            <span>{{langs.get('result')[selectlang]}}</span>
        </ng-template>
        <div>
            <p-table *ngIf="new_data==true" #dt2 [value]="result_list" styleClass="p-datatable-sm"
                [tableStyle]="{'min-width': '80rem'}" [scrollable]="true" scrollHeight="500px" [virtualScroll]="true"
                selectionMode="single" [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
                [paginator]="true"
                currentPageReportTemplate="{{langs.get('showing')[selectlang]}} {first} {{langs.get('to')[selectlang]}} {last} {{langs.get('of')[selectlang]}} {totalRecords} {{langs.get('entries')[selectlang]}}">
                <ng-template pTemplate="caption">
                    <div class="flex">
                        <span class="p-input-icon-left ml-auto">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text"
                                (input)="dt2.filterGlobal($any($event).target.value, 'contains')"
                                placeholder="{{langs.get('search')[selectlang]}}" />
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>{{langs.get('no')[selectlang]}}</th>
                        <th>{{langs.get('worker_code')[selectlang]}}</th>
                        <th>{{langs.get('type')[selectlang]}}</th>
                        <th>{{langs.get('code')[selectlang]}}</th>
                        <th>{{langs.get('modified_by')[selectlang]}}</th>
                        <th>{{langs.get('modified_date')[selectlang]}}</th>
                    </tr>

                </ng-template>
                <ng-template pTemplate="body" let-data let-i="rowIndex">
                    <tr [pSelectableRow]="data">
                        <td>{{i+1}}</td>
                        <td>{{data.worker}}</td>
                        <td>{{data.type}}</td>
                        <td>{{data.policy}}</td>
                        <td>{{data.modied_by}}</td>
                        <td>{{data.modied_date | date:'dd/MM/yyyy'}}</td>

                    </tr>
                </ng-template>
            </p-table>
        </div>
    </p-tabPanel>

</p-tabView>


<app-spinner [loadding]="initial_current.loading"></app-spinner>