<!-- <p>employee-paysuspend works!</p> -->
<p-breadcrumb class="max-w-full" [model]="itemslike" [home]="home"></p-breadcrumb>
<hr>

<p-tabView [(activeIndex)]="index" (onChange)="function($event)">
    <p-tabPanel [selected]="true">
        <ng-template pTemplate="header">
            <i class="pi pi-cog"></i>&nbsp;&nbsp;
            <span>{{title_process[initial_current.Language]}}</span>
        </ng-template>

        <div class="formgrid grid align-items-end">

            <div class="field col-12">
                <app-select-emp></app-select-emp>
            </div>
            <div class="paysuspend field col-12 md:col-8">
                <div style="grid-column: 1/3;">
                    <label>{{title_type[initial_current.Language]}}</label>
                    <div class="radio">
                        <p-radioButton name="benefit_paytype" value="S"
                            [(ngModel)]="selectedPaysuspend.paysuspend_type"></p-radioButton>&nbsp;
                        <label>{{title_suspend[initial_current.Language]}}</label>
                        &nbsp;&nbsp;
                        <p-radioButton name="benefit_paytype" value="C"
                            [(ngModel)]="selectedPaysuspend.paysuspend_type"></p-radioButton>&nbsp;
                        <label>{{title_notcal[initial_current.Language]}}</label>
                    </div>
                </div>

                <div style="grid-column: 1/3;">
                    <label>{{title_note[initial_current.Language]}}</label>
                    <textarea [(ngModel)]="selectedPaysuspend.paysuspend_note" pInputTextarea></textarea>
                </div>

                <div style="grid-column: 1/3;">
                    <label>{{title_reason[initial_current.Language]}}</label>
                    <p-dropdown placeholder="--" [options]="reason_list" optionValue="reason_code" [showClear]="true"
                        [(ngModel)]="selectedPaysuspend.reason_code" [style]="{ width: '100%', overflow: 'visible' }">
                        <ng-template let-item pTemplate="item" pTemplate="selectedItem">
                            {{initial_current.Language=="TH"? item.reason_name_th : item.reason_name_en}}
                        </ng-template>
                        <ng-template let-item pTemplate="item">
                            {{initial_current.Language=="TH"? item.reason_name_th : item.reason_name_en}}
                        </ng-template>
                    </p-dropdown>
                </div>

                <div style="grid-column: 1/3;">
                    <label>{{title_status[initial_current.Language]}}</label>
                    <div class="radio">
                        <p-radioButton name="benefit_paytype" value="Y"
                            [(ngModel)]="selectedPaysuspend.paysuspend_payment"></p-radioButton>&nbsp;
                        <label>{{title_payY[initial_current.Language]}}</label>
                        &nbsp;&nbsp;
                        <p-radioButton name="benefit_paytype" value="N"
                            [(ngModel)]="selectedPaysuspend.paysuspend_payment"></p-radioButton>&nbsp;
                        <label>{{title_payN[initial_current.Language]}}</label>
                    </div>
                </div>
            </div>
            <div *ngIf="!loading" class="field col-12 md:col-6">

                <p-button label="{{title_btnprocess[initial_current.Language]}}" (click)="process()"></p-button>
            </div>
            <p-progressBar *ngIf="loading" mode="indeterminate" [style]="{'height': '6px'}"></p-progressBar>
        </div>
    </p-tabPanel>

    <p-tabPanel>
        <ng-template pTemplate="header">
            <i class="pi pi-bars"></i>&nbsp;&nbsp;
            <span>{{title_view[initial_current.Language]}}</span>
        </ng-template>

        <p-tabView (onChange)="onLoadEmp()">
            <p-tabPanel [selected]="true">
                <ng-template pTemplate="header">
                    <i class="pi pi-calendar"></i>&nbsp;&nbsp;
                    <span>{{title_byperiod[initial_current.Language]}}</span>
                </ng-template>
                <div class="select">
                    <label>Period:</label>
                    <p-dropdown appendTo="body" class="selectyaer" [options]="periods_list" [(ngModel)]="periods_select"
                        (onChange)="selectperiod()">
                        <ng-template let-item pTemplate="selectedItem">
                            {{initial_current.Language=="TH"? item.period_name_th :
                            item.period_name_en}}
                        </ng-template>
                        <ng-template let-item pTemplate="item">
                            {{initial_current.Language=="TH"? item.period_name_th :
                            item.period_name_en}}
                        </ng-template>
                    </p-dropdown>
                </div>
            </p-tabPanel>

            <p-tabPanel>
                <ng-template pTemplate="header">
                    <i class="pi pi-user"></i>&nbsp;&nbsp;
                    <span>{{title_byemp[initial_current.Language]}}</span>
                </ng-template>

                <table style="width: 600px;">
                    <tr>
                        <td style="width: 20px;">
                            <i class="pi pi-angle-left" style="font-size: 2rem" (click)="doBackWorker()"></i>
                        </td>
                        <td style="width: 150px;">
                            <input id="lastname2" type="text" [value]="worker_code" name="worker_code"
                                style="text-align: center;"
                                class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                                readonly>
                        </td>
                        <td style="width: 20px;">
                            <i class="pi pi-angle-right" style="font-size: 2rem" (click)="doNextWorker()"></i>
                        </td>
                        <td style="width: 20px;">
                            <i class="pi pi-search" (click)="open_searchemp()"></i>
                        </td>
                        <td style="width: 250px;" align="left">
                            <input id="lastname2" type="text" [value]="worker_name" style="width: 250px;"
                                class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                                readonly>
                        </td>

                        <!-- resign -->
                        <td style="width: 250px;" align="left">
                            <p-checkbox name="resign" [binary]="true" (onChange)="doLoadEmployee()"
                                [(ngModel)]="fillterIncludeResign"></p-checkbox>&nbsp;
                            <label>{{title_resign[initial_current.Language]}} </label>

                        </td>
                    </tr>
                </table>
                <p></p>
                <!-- --------------END Form employee by deduct------------------ -->
            </p-tabPanel>
        </p-tabView>

    </p-tabPanel>
</p-tabView>


<!-- ConfirmDialog and toast Noti -->
<p-toast position="top-right"></p-toast>
<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text"
    key="myDialog"></p-confirmDialog>
<!-- ----------------------END Confirm and Toast------------------------ -->

<p-dialog [(visible)]="searchEmp" [style]="{width: '40vw'}" [position]="position">
    <div class="grid">
        <div class="col-12">
            <app-search-emp></app-search-emp>
        </div>
        <div class="col-12">
            <p-button label="{{title_btn_select[initial_current.Language]}}" icon="pi pi-check"
                (click)="select_emp()"></p-button>
            &nbsp;
            <button pButton pRipple type="button" label="{{title_btn_close[initial_current.Language]}}"
                class="p-button-secondary" (click)="close_searchemp()"></button>
        </div>
    </div>
</p-dialog>
<div *ngIf="searchEmp" style="z-index: 1084;" class="p-component-overlay p-sidebar-mask p-component-overlay-enter">
</div>