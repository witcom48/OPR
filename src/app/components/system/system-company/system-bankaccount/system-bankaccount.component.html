<p-toast position="top-right"></p-toast>

<p-confirmDialog
    [style]="{ width: '50vw' }"
    [baseZIndex]="10000"
    rejectButtonStyleClass="p-button-text"
></p-confirmDialog>

<p-dialog
    header="{{ title_upload }}"
    [(visible)]="displayUpload"
    [style]="{ width: '40vw' }"
>
    <p class="custom-file-upload">
        <input
            type="file"
            id="file"
            style="width: 300px"
            (change)="handleFileInput($any($event).target.files)"
        />
    </p>
    <ng-template pTemplate="footer">
        <p-button
            icon="pi pi-upload"
            (click)="doUploadCombank()"
            label="{{ title_upload }}"
            styleClass="p-button-text"
        ></p-button>
    </ng-template>
</p-dialog>
<div class="field col-12 md:col-12">
<p-menubar [model]="items"></p-menubar>
<div class="grid">
    <div class="col-20 md:col-10" #TABLE>
        <p-table
            #dt2
            [value]="combank_list"
            styleClass="p-datatable-sm"
            [tableStyle]="{ 'min-width': '70rem' }"
            [scrollable]="true"
            scrollHeight="500px"
            [virtualScroll]="true"
            selectionMode="single"
            [(selection)]="selectedCombank"
            dataKey="combank_bankcode"
            [rows]="30"
            [showCurrentPageReport]="true"
            [rowsPerPageOptions]="[10, 25, 50]"
            [paginator]="false"
            currentPageReportTemplate="{{ title_page_from }} {first} {{
                title_page_to
            }} {last} {{ title_page_total }} {totalRecords} {{
                title_page_record
            }}"
            [globalFilterFields]="['combank_bankcode','combank_bankaccount','combank_nameaccount','combank_bankpercent','combank_cashpercent','modified_by','modified_date',]"
        >
        <ng-template pTemplate="caption">
                <div class="flex">
                    <span class="p-input-icon-left ml-auto">
                        <i class="pi pi-search"></i>
                        <input
                            pInputText
                            type="text"
                            (input)="
                                dt2.filterGlobal(
                                    $any($event).target.value,
                                    'contains'
                                )
                            "
                            placeholder="{{ title_search }}"
                        />
                    </span>
                </div>
            </ng-template>

            <ng-template pTemplate="header">
                <tr>
                    <th>{{ title_combank_bankcode }}</th>
                    <th>{{ title_combank_bankaccount }}</th>
                    <th>{{ title_combank_nameaccount }}</th>
                    <th>{{ title_combank_bankpercent }}</th>
                    <th>{{ title_combank_cashpercent }}</th>
                    <th>{{ modified_by }}</th>
                    <th>{{ modified_date }}</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-data>
                <tr [pSelectableRow]="data">
                    <th>{{ data.combank_bankcode }}</th>
                    <th>{{ data.combank_bankaccount }}</th>
                    <th>{{ data.combank_nameaccount }}</th>
                    <th>{{ data.combank_bankpercent }}</th>
                    <th>{{ data.combank_cashpercent }}</th>
                    <th>{{ data.modified_by }}</th>
                    <th>{{ data.modified_date | date : "dd/MM/yyyy HH:mm" }}
                    </th>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <div class="col-12 md:col-2 ">
        <div
            class="formgrid grid"
            *ngIf="edit_data === true || new_data === true"
        >
            <span class="spn_title_edit"></span>


            <div class="field col-12">
                <label for="ppos_name_th">{{ title_company_code }}</label>
                <br />
                <textarea
                    [rows]="2"
                    id="ppos_name_en"[(ngModel)]="selectedCombank.company_code"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" maxlength="10" [readonly]="edit_data"
                    pInputTextarea
                    [autoResize]="true"
                ></textarea>
            </div>

            <div class="field col-12">
                <label for="ppos_name_th">{{ title_combank_bankcode }}</label>
                <br />
                <textarea
                    [rows]="2"
                    id="ppos_name_th"
                    [(ngModel)]="selectedCombank.combank_bankcode"
                   class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" maxlength="50" [cols]="10"
                    pInputTextarea
                    [autoResize]="true"
                ></textarea>
            </div>

            <div class="field col-12">
                <label for="ppos_name_th">{{ title_combank_bankaccount }}</label>
                <br />
                <textarea
                    [rows]="2"
                    id="ppos_name_th"
                    [(ngModel)]="selectedCombank.combank_bankaccount"
                   class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" maxlength="50" [cols]="30"
                    pInputTextarea
                    [autoResize]="true"
                ></textarea>
            </div>

            <div class="field col-12">
                <label for="ppos_name_th">{{ title_combank_nameaccount }}</label>
                <br />
                <textarea
                    [rows]="2"
                    id="ppos_name_th"
                    [(ngModel)]="selectedCombank.combank_nameaccount"
                   class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" maxlength="50" [cols]="30"
                    pInputTextarea
                    [autoResize]="true"
                ></textarea>
            </div>

            <div class="field col-12">
                <label for="ppos_name_th">{{ title_combank_bankpercent }}</label>
                <br />
                <textarea
                    [rows]="2"
                    id="ppos_name_th"
                    [(ngModel)]="selectedCombank.combank_bankpercent"
                  class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" maxlength="50"  [cols]="30000"
                    pInputTextarea
                    [autoResize]="true"
                ></textarea>
            </div>

            <div class="field col-12">
                <label for="ppos_name_th">{{ title_combank_cashpercent }}</label>
                <br />

                <textarea
                    [rows]="2"
                    id="ppos_name_th"
                    [(ngModel)]="selectedCombank.combank_cashpercent"
                  class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" maxlength="50"  [cols]="30000"
                    pInputTextarea
                    [autoResize]="true"
                ></textarea>
            </div>


            <div class="field col-12">
                <p-button
                    label="{{ title_save }}"
                    icon="pi pi-save"
                    (onClick)="confirmRecord()"
                ></p-button>

            </div>
        </div>
    </div>
</div>




<!-- ข้อมูลธนาคาร -->
                        <!-- <div class="field col-12">
                            <p-accordion>
                                <p-accordionTab header="ข้อมูลธนาคาร" >
                                    <p-menubar [model]="items"></p-menubar>
                                    <p-table #dt4  styleClass="p-datatable-sm" [tableStyle]="{'min-width': '60rem'}" [scrollable]="true" scrollHeight="200px" [virtualScroll]="true" selectionMode="single"
                                    [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
                                    [paginator]="false" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                    >
                                        <ng-template pTemplate="caption">
                                            <div class="flex">
                                                <span class="p-input-icon-left ml-auto">
                                                    <i class="pi pi-search"></i>
                                                    <input pInputText type="text" (input)="dt4.filterGlobal($any($event).target.value, 'contains')" placeholder="Search keyword" />
                                                </span>
                                            </div>
                                        </ng-template>
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>ธนาคาร</th>
                                                <th>เลขที่บัญชี</th>
                                                <th>ชื่อบัญชี</th>
                                                <th>ธนาคาร(%)</th>
                                                <th>เงินสด(%)</th>
                                                <th>ผู้ทำรายการ</th>
                                                <th>วันที่ทำรายการ</th>
                                            </tr>

                                        </ng-template>
                                    </p-table>
                                </p-accordionTab>
                            </p-accordion>
                        </div> -->
